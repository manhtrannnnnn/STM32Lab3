/*
 * button.c
 *
 *  Created on: Nov 14, 2023
 *      Author: ASUS TUF
 */

#include "button.h"

#define NORMAL_STATE GPIO_PIN_SET
#define PRESSED_STATE GPIO_PIN_RESET

int buttonFlag =
int TimerForKeyPress = 200;

int isButtonPressed(){
	if(button_flag == 1){
		button_flag = 0;
		return 1;
	}
	return 0;
}


void subKeyProcess(){
	button_flag = 1;
}

void getKeyInput(){
	keyReg0 = keyReg1;
	keyReg1 = keyReg2;
	keyReg2 = HAL_GPIO_ReadPin(Button1_GPIO_Port, Button1_Pin);
	if((keyReg0 == keyReg1) && (keyReg1 == keyReg2)){
		if(keyReg3 != keyReg2){
			keyReg3 = keyReg2;
			if(keyReg2 == PRESSED_STATE){
				//TODO
				subKeyProcess();
				TimerForKeyPress = 200;
			}
		}else{
			TimerForKeyPress--;
			if(TimerForKeyPress == 0){
				//TODO
				keyReg3 = NORMAL_STATE;
			}
		}
	}
}
